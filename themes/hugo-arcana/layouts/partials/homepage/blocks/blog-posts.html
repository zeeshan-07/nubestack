<section class="homepage-blog-section">
    <div class="container">
        {{ with .item.title }}
            <header class="section-header">
                <h2>{{ . }}</h2>
                {{ with $.item.subtitle }}
                    <p>{{ . }}</p>
                {{ end }}
            </header>
        {{ end }}

        {{- $pages := (.ctx.Site.GetPage .item.content_type).RegularPages }}
        <div class="blog-cards-grid">
            {{- range first (.item.max | default 3) $pages }}
                <article class="blog-card">
                    <a href="{{ .RelPermalink }}" class="blog-card-image">
                        <img src="{{ .Params.image | relURL }}" alt="{{ .Params.image_alt | default .Title }}" />
                    </a>
                    <div class="blog-card-content">
                        <div class="blog-card-meta">
                            {{ if .Site.Params.show_post_dates | default true }}
                                {{- with .Date }}
                                    <time class="blog-card-date">
                                        <i class="far fa-calendar-alt"></i>
                                        {{ . | time.Format ":date_medium" }}
                                    </time>
                                {{ end }}
                            {{ end }}
                            {{ with .Params.tags }}
                                <div class="blog-card-tags">
                                    {{ range first 2 . }}
                                        <span class="blog-card-tag">{{ . }}</span>
                                    {{ end }}
                                </div>
                            {{ end }}
                        </div>
                        <h3 class="blog-card-title">
                            <a href="{{ .RelPermalink }}">{{ .Title }}</a>
                        </h3>
                        <p class="blog-card-excerpt">
                            {{ with .Description }}
                                {{- . | truncate 120 }}
                            {{- else }}
                                {{- .Summary | truncate 120 }}
                            {{- end }}
                        </p>
                        <a href="{{ .RelPermalink }}" class="blog-card-readmore">
                            Read More <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </article>
            {{- end }}
        </div>

        <div class="blog-view-all">
            <a href="/blog" class="button large">View All Articles</a>
        </div>
    </div>
</section>
