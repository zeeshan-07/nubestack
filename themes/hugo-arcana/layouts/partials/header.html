{{ $contact := .Site.Data.contact_info }}
<!-- Contact Bar -->
<div class="contact-bar">
    <div class="container">
        <div class="contact-info">
            {{ with $contact.email }}
            <a href="mailto:{{ . }}" class="contact-item">
                <i class="fas fa-envelope"></i> {{ . }}
            </a>
            {{ end }}
            {{ with $contact.phone }}
            <span class="contact-item phone">
                <i class="fas fa-phone"></i> {{ . }}
            </span>
            {{ end }}
            {{ with $contact.whatsapp }}
            {{ if and .link .display }}
            <a href="{{ .link }}" target="_blank" class="contact-item">
                <i class="fab fa-whatsapp"></i> {{ .display }}
            </a>
            {{ end }}
            {{ end }}
            {{ with index $contact.social 0 }}
            <a href="{{ .url }}" target="_blank" class="contact-item">
                <i class="{{ .icon }}"></i> {{ .title }}
            </a>
            {{ end }}
        </div>
    </div>
</div>

<div id="header">
    {{ if hugo.IsMultilingual }}
        {{- partial "languages.html" . }}
    {{- end -}}
    
    <!-- Hidden logo wrapper for mobile titleBar generation -->
    <div id="logo-wrapper" style="display: none;">
        <a href="/">
            {{- if .Site.Data.globalheader.image }}
                <img src="{{ .Site.Data.globalheader.image | relURL }}" alt="{{ .Site.Data.globalheader.image_alt }}" />
            {{- end }}
            {{ with .Site.Data.globalheader.title }}{{ . | markdownify }}{{ end }}
        </a>
    </div>
    
    <nav id="nav">
        <ul>
            <li class="logo-item">
                <a href="/" id="logo">
                    {{- if .Site.Data.globalheader.image }}
                        <img src="{{ .Site.Data.globalheader.image | relURL }}" alt="{{ .Site.Data.globalheader.image_alt }}" />
                    {{- end }}
                    {{ with .Site.Data.globalheader.title }}{{ . | markdownify }}{{ end }}
                </a>
            </li>
            {{- range .Site.Menus.main }}
                <li class="{{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}current{{ end }}">
                    <a href="{{ .URL | default "#" }}">{{ .Name }}</a>
                    {{- if .HasChildren -}}
                    <ul>
                        {{- range .Children }}
                        <li class="{{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}current{{ end }}">
                            <a href="{{ .URL | default "#" }}">{{ .Name }}</a>
                            {{- if .HasChildren -}}
                            <ul>
                                {{- range .Children }}
                                <li class="{{ if or ($.Page.IsMenuCurrent "main" .) ($.Page.HasMenuCurrent "main" .) }}current{{ end }}">
                                    {{/* aoeu fix 'current' thing */}}
                                    <a href="{{ .URL | default "#" }}">{{ .Name }}</a>
                                {{- end }}
                            </ul>
                            {{- end -}}
                        {{- end }}
                    </ul>
                    {{- end -}}
            {{- end }}
            <!-- Dark Mode Toggle in Menu -->
            <li class="dark-mode-menu-item">
                <a href="#" id="dark-mode-toggle" aria-label="Toggle dark mode">
                    <i class="fas fa-moon"></i>
                </a>
            </li>
        </ul>
    </nav>
</div>
